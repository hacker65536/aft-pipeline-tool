# GitHub Code Scanning is now available by default, so this workflow is commented out
# This file is intentionally commented out to disable the security workflow

# name: Security

# on:
#   schedule:
#     # Run security checks daily at 2 AM UTC
#     - cron: '0 2 * * *'
#   workflow_dispatch: # Manual trigger

# env:
#   GO_VERSION: '1.23'

# jobs:
#   security:
#     runs-on: ubuntu-latest
#     strategy:
#       matrix:
#         tool: [govulncheck, nancy, gosec]
#     steps:
#     - uses: actions/checkout@v5.0.0

#     - name: Set up Go
#       uses: actions/setup-go@v6.0.0
#       with:
#         go-version: ${{ env.GO_VERSION }}

#     - name: Cache Go modules
#       uses: actions/cache@v4.2.4
#       with:
#         path: ~/go/pkg/mod
#         key: ${{ runner.os }}-go-${{ hashFiles('**/go.sum') }}
#         restore-keys: |
#           ${{ runner.os }}-go-

#     - name: Install dependencies
#       run: go mod download

#     - name: Run govulncheck
#       if: matrix.tool == 'govulncheck'
#       run: |
#         go install golang.org/x/vuln/cmd/govulncheck@latest
#         govulncheck ./...

#     - name: Run Nancy
#       if: matrix.tool == 'nancy'
#       run: |
#         go list -json -m all > go.list
      
#     - name: Nancy Security Scan
#       if: matrix.tool == 'nancy'
#       uses: sonatype-nexus-community/nancy-github-action@main
#       with:
#         nancyCommand: sleuth --loud

#     - name: Run Gosec Security Scanner
#       if: matrix.tool == 'gosec'
#       uses: securego/gosec@master
#       with:
#         args: '-no-fail -fmt sarif -out results.sarif ./...'

#     - name: Upload SARIF file
#       if: matrix.tool == 'gosec'
#       uses: github/codeql-action/upload-sarif@codeql-bundle-v2.23.0
#       with:
#         sarif_file: results.sarif

#   codeql:
#     name: CodeQL
#     runs-on: ubuntu-latest
#     permissions:
#       actions: read
#       contents: read
#       security-events: write

#     strategy:
#       fail-fast: false
#       matrix:
#         language: [ 'go' ]

#     steps:
#     - name: Checkout repository
#       uses: actions/checkout@v5.0.0

#     - name: Initialize CodeQL
#       uses: github/codeql-action/init@codeql-bundle-v2.23.0
#       with:
#         languages: ${{ matrix.language }}

#     - name: Autobuild
#       uses: github/codeql-action/autobuild@codeql-bundle-v2.23.0

#     - name: Perform CodeQL Analysis
#       uses: github/codeql-action/analyze@codeql-bundle-v2.23.0
#       with:
#         category: "/language:${{matrix.language}}"
